{"version":3,"sources":["all.js"],"names":["dataUrl","app","map","innerHeight","window","zoneData","zoneDataList","jsonData","filerData","initMap","google","maps","Map","document","getElementById","center","lat","lng","zoom","reInitMap","parseFloat","Wgs84Y","Wgs84X","initMarker","i","length","marker","Marker","position","title","Name","xhr","XMLHttpRequest","open","send","onload","JSON","parse","responseText","DataSet","NewDataSet","CASE_SUMMARY","console","log","j","indexOf","CaseLocationDistrict","push","Vue","el","data","originData","filer","selectorZone","dataToggle","methods","zoneDataInput","zoneValue","$","ready","css"],"mappings":"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","file":"all.js","sourcesContent":["const dataUrl = 'https://tcgbusfs.blob.core.windows.net/blobfs/GetDisasterSummary.json'\r\nvar app;\r\nvar map;\r\n\r\nvar innerHeight = window.innerHeight;\r\nvar zoneData = [];\r\nvar zoneDataList = '';\r\nvar jsonData =[];\r\nvar filerData=[];\r\n\r\n\r\n// 第一次載入地圖\r\nvar initMap = function(){\r\n    map = new google.maps.Map(document.getElementById('map'), {\r\n        center: {lat: 25.050592, lng: 121.539384},\r\n        zoom: 12,\r\n      })\r\n    };\r\n// 重新載入地圖\r\nvar reInitMap = function(){\r\n    map = new google.maps.Map(document.getElementById('map'), {\r\n        center: {lat: parseFloat(filerData[0].Wgs84Y), lng: parseFloat(filerData[0].Wgs84X)},\r\n        zoom: 14,\r\n      })\r\n    };\r\n// 重新載入地圖標記\r\nvar initMarker = function(){\r\n    for (var i=0; i<filerData.length; i++){\r\n        var marker = new google.maps.Marker({\r\n            position : {lat: parseFloat(filerData[i].Wgs84Y),lng: parseFloat(filerData[i].Wgs84X)},\r\n            map: map,\r\n            title : filerData[i].Name\r\n        });\r\n    }\r\n}\r\n// 載入網頁時預先加載一次地圖\r\ninitMap();\r\n\r\n// 申請API資料\r\nvar xhr = new XMLHttpRequest();\r\nxhr.open('GET',dataUrl,true);\r\nxhr.send(null);\r\n\r\nxhr.onload = function(){\r\n    //載入資料至jsonData\r\n    jsonData = JSON.parse(xhr.responseText).DataSet['diffgr:diffgram'].NewDataSet.CASE_SUMMARY;\r\n    filerData = jsonData;\r\n\r\n    console.log(jsonData);\r\n\r\n    // 載入不重複行政區名單\r\n    for (var i=0; i<jsonData.length; i++){\r\n        var j = zoneData.indexOf(jsonData[i].CaseLocationDistrict);\r\n        if (j === -1){\r\n            zoneData.push(jsonData[i].CaseLocationDistrict)\r\n        }\r\n    };\r\n\r\n    // Vue.js\r\n    app = new Vue({\r\n        el: '#app',\r\n        data: {\r\n            originData : jsonData,\r\n            filer: filerData,\r\n            selectorZone: zoneData,\r\n            dataToggle: false,\r\n        },\r\n        methods: {\r\n            // 選擇區域後篩選資料\r\n            zoneDataInput: function(zoneValue){\r\n                this.filer = [];\r\n                this.dataToggle = true;\r\n                for (var i=0; i<jsonData.length; i++){\r\n                    if (jsonData[i].CaseLocationDistrict == zoneValue){\r\n                        this.filer.push(jsonData[i])\r\n                    }\r\n                }\r\n                filerData = this.filer;\r\n                console.log(filerData);\r\n                reInitMap();\r\n                initMarker();\r\n            },\r\n        },\r\n    })\r\n};\r\n\r\n\r\n// jQuery\r\n$(document).ready(function(){\r\n    // header自適應使用者螢幕高度\r\n    $('#header').css('height',innerHeight);\r\n    $('#header h1').css('padding-top',innerHeight/3 -25);\r\n})\r\n\r\n"]}